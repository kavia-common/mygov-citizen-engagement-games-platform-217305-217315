{"is_source_file": true, "format": "Python", "description": "A minimal HTTP health server for the gaming_database container, providing health status endpoints for SQLite database readiness and availability, including initialization logic.", "external_files": ["init_db.py"], "external_methods": ["subprocess.run", "os.path.exists", "os.path.getsize", "os.path.abspath", "os.path.join", "sqlite3.connect", "time.time", "json.dumps"], "published": [], "classes": [{"name": "Handler", "description": "HTTP request handler class providing health check endpoints and control logic."}], "methods": [{"name": "main()", "description": "Main function initializing the health server, managing database setup, and starting HTTP server.", "scope": "", "scopeKind": ""}, {"name": "init_db_if_needed()", "description": "Checks if the SQLite database exists and is populated; invokes init_db.py if necessary.", "scope": "main", "scopeKind": "function"}, {"name": "check_sqlite_health()", "description": "Performs a lightweight health check on the SQLite database, returning status and details.", "scope": "main", "scopeKind": "function"}, {"name": "_send(self, code, payload)", "description": "Sends a JSON response with specified HTTP status code and payload.", "scope": "main.Handler", "scopeKind": "class"}, {"name": "do_GET(self)", "description": "Handles GET requests to health-related endpoints, returning the current health status.", "scope": "main.Handler", "scopeKind": "class"}, {"name": "log_message(self, format, *args)", "description": "Overrides default logging to suppress request logs.", "scope": "main.Handler", "scopeKind": "class"}], "calls": ["subprocess.run", "os.path.exists", "os.path.getsize", "sqlite3.connect", "cur.execute", "cur.fetchone", "json.dumps", "time.time"], "search-terms": ["health server", "SQLite database", "init_db.py", "health check", "status reporting", "Python HTTP server", "minimal health monitor"], "state": 2, "file_id": 10, "knowledge_revision": 22, "git_revision": "", "ctags": [{"_type": "tag", "name": "Handler", "path": "/home/kavia/workspace/code-generation/mygov-citizen-engagement-games-platform-217305-217315/gaming_database/health_server.py", "pattern": "/^    class Handler(http.server.BaseHTTPRequestHandler):$/", "file": true, "language": "Python", "kind": "class", "scope": "main", "scopeKind": "function"}, {"_type": "tag", "name": "_send", "path": "/home/kavia/workspace/code-generation/mygov-citizen-engagement-games-platform-217305-217315/gaming_database/health_server.py", "pattern": "/^        def _send(self, code, payload):$/", "language": "Python", "kind": "member", "signature": "(self, code, payload)", "scope": "main.Handler", "scopeKind": "class"}, {"_type": "tag", "name": "check_sqlite_health", "path": "/home/kavia/workspace/code-generation/mygov-citizen-engagement-games-platform-217305-217315/gaming_database/health_server.py", "pattern": "/^    def check_sqlite_health():$/", "file": true, "language": "Python", "kind": "function", "signature": "()", "scope": "main", "scopeKind": "function"}, {"_type": "tag", "name": "do_GET", "path": "/home/kavia/workspace/code-generation/mygov-citizen-engagement-games-platform-217305-217315/gaming_database/health_server.py", "pattern": "/^        def do_GET(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "main.Handler", "scopeKind": "class"}, {"_type": "tag", "name": "init_db_if_needed", "path": "/home/kavia/workspace/code-generation/mygov-citizen-engagement-games-platform-217305-217315/gaming_database/health_server.py", "pattern": "/^    def init_db_if_needed():$/", "file": true, "language": "Python", "kind": "function", "signature": "()", "scope": "main", "scopeKind": "function"}, {"_type": "tag", "name": "log_message", "path": "/home/kavia/workspace/code-generation/mygov-citizen-engagement-games-platform-217305-217315/gaming_database/health_server.py", "pattern": "/^        def log_message(self, format, *args):$/", "language": "Python", "kind": "member", "signature": "(self, format, *args)", "scope": "main.Handler", "scopeKind": "class"}, {"_type": "tag", "name": "main", "path": "/home/kavia/workspace/code-generation/mygov-citizen-engagement-games-platform-217305-217315/gaming_database/health_server.py", "pattern": "/^def main():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "server_version", "path": "/home/kavia/workspace/code-generation/mygov-citizen-engagement-games-platform-217305-217315/gaming_database/health_server.py", "pattern": "/^        server_version = \"GamingDatabaseHealth\\/1.0\"$/", "language": "Python", "kind": "variable", "scope": "main.Handler", "scopeKind": "class"}], "hash": "c6433ebe86a6f44e80837be020598ef6", "format-version": 4, "code-base-name": "gaming_database", "filename": "gaming_database/health_server.py", "fields": [{"name": "server_version = \"GamingDatabaseHealth\\/1.0\"", "scope": "main.Handler", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"22": ""}]}